<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Resume - Start Bootstrap Theme</title>
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">Patty Meza</span>
                <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="images/me.png" alt="..." /></span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">Home</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#lab1">Lab 1</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#lab1.2">Lab 1.2</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#lab2">Lab 2</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#lab3">Lab 3</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#lab4">Lab 4</a></li>
                </ul>
            </div>
        </nav>
        <!-- Page Content-->
        <div class="container-fluid p-0">
            <!-- About-->
            <section class="resume-section" id="about">
                <div class="resume-section-content">
                    <h1 class="mb-0">
                        Patty <span class="text-primary">Meza</span>
                    </h1>
                    <div class="subheading mb-5">
                        <a href="mailto:name@email.com">pim9@cornell.edu</a>
                    </div>
                    <p class="lead mb-5">Hi! This is my home page for my ECE 4160 labs. I am a Senior MechE student at Cornell University and I am interested 
                        in robotics for extreme environments such as space! I am currently building a 
                        bipedal robot for my project team Cornell Cup Robotics!</p>

                </div>
            </section>
            <hr class="m-0" />
            
            
<!--------------------------------- LAB 1 ----------------------------------->
<!--------------------------------- LAB 1 ----------------------------------->
<!--------------------------------- LAB 1 ----------------------------------->
            
            <section class="resume-section" id="lab1">
                <div class="resume-section-content">
                    <h2 class="mb-5">Lab 1</h2>
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Introduction</h3>
                            <div class="subheading mb-3">Lab Objectives</div>
                            <p>The objective of this lab is to set up and become familiar with the Arduino IDE and the Artemis board. We set up the board and downloaded 
                                the necessary packages to facilitate sending messages from the board to our computer over Bluetooth. Using the Arduino examples, we the 
                                practiced reading/writing serial messages over USB.</p>
                            <div class="subheading mb-3">Components</div>
                            <p>1 x SparkFun RedBoard Artemis Nano</p>
                            <p>1 x USB C-to-C or A-to-C cable</p>
                        </div>
                        <div class="flex-shrink-0"><span class="text-primary">Janurary 24th</span></div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            
                            <h3 class="mb-0">Prelab</h3>
                            <div class="subheading mb-3">Artemis Board Set up</div>
                            <div style="margin-bottom: 40px;">
                                <p>I started with downloading the Arduino IDE and setting up the SparkFun RedBoard Artemis Nano with these 
                                    <a href="https://learn.sparkfun.com/tutorials/artemis-development-with-arduino?_ga=2.30055167.1151850962.1594648676-1889762036.1574524297&_gac=1.19903818.1593457111.Cj0KCQjwoub3BRC6ARIsABGhnyahkG7hU2v-0bSiAeprvZ7c9v0XEKYdVHIIi_-J-m5YLdDBMc2P_goaAtA4EALw_wcB">
                                        instructions</a></p>
                                <p>I plugged the board into my computer and I ensured the Arduino IDE was able to locate it and selected the appropriate port (see the below screenshot)</p>
                                <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab1/port.png" alt="..." /></span>
                            </div>
                            
                            <div class="subheading mb-3">Tasks</div>
                            <div style="margin-top: 10px;">
                                <p>1. I tried various example codes provided by the Apollo dev kit starting with "Blink" In File->Examples->Basics, here is a video of what happened once I uploaded the code to the board.</p>
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/lbY7I_NVAPI?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <p>2. Next, I tried "Example4_Serial" In File->Examples->Artemis Examples, here is what printed out in the serial monitor once I uploaded the code onto the board.</p>
                                <div><span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab1/serial_crop.png" alt="..." /></span></div>
                            </div>

                            <div style="margin-top: 20px;">
                                <p>3. The next task was to test the temperature sensor with "Example2_analogRead" File->Examples->Artemis Examples. In this video, you can see the temperature values increasing when I hold my finger over the sensor.</p>
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/Nesj9T_TWc0?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>

                            <div style="margin-top: 20px;">
                                <p>4. Lastly, I tested the microphone with the sample code "Example1_MicrophoneOutput" in File->Examples->PDM. In this video, I play a constant note and in the serial monitor, you can see the frequency change and hold constant.</p>
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/3NaEEql777o?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Setting up Bluetooth connection</h3>
                            <div class="subheading mb-3">Computer set up</div>

                            <div>
                                <p>I first started by verifying what version of Python and Pip I had using the macOS terminal.
                                I confirmed I had the latest releases (Python >= 3.9 and pip >= 21.0)</p>
                                <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab1/checkvers.png" alt="..." /></span>
                            </div>

                            <div style="margin-top: 30px;">
                                <p>Then I installed the virtual environment using the following commands:
                                    <br><span class="text-primary">python3 -m pip install --user virtualenv</span>
                                    <br><span class="text-primary">cd /Users/patty/Documents/fastrobots</span>
                                    <br><span class="text-primary">python3 -m venv FastRobots_ble</span>
                                </p>
                                
                                <p>To start the virtual environment use this command:
                                    <br><span class="text-primary">source FastRobots_ble/bin/activate</span>
                                </p>
                                
                                <p>To confirm you are in the virtual environment you should see the prefix (FastRobots_ble) before each command:</p>
                                <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab1/prefix .png" alt="..." /></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <div style="margin-top: 20px;" class="subheading mb-3">Artemis Board Setup</div>
                            
                            <div style="margin-top: 20px;">
                                    <p>Install ArduinoBLE from the library manager (Tools -> Manage Libraries…) in the Arduino IDE.</p>
                                    <p>Open and run ble_arduino.ino into the Artemis board from the directory ble_arduino in the codebase.</p>
                                    <p>The Artemis board should now print its MAC address.<br> My MAC address: C0:83:0C:69:AC:3C </p>
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab1/mac adress.png" alt="..." /></span>
                                </div>

                                <div style="margin-top: 20px;">
                                    <p>I downloaded the provided codebase into my project directory. I copied the "ble_python" directory into my project directory. 
                                        And finally, I started the Jupyter server by typing in the command:
                                        <br><span class="text-primary">Jupyter lab</span>
                                    </p>
                                </div>
                            
                            </div>
                        </div>
                    </div>
  
                </div>
            </section>
            <hr class="m-0" />
        
<!------------------------------------- LAB 1.2 -------------------------------------->            
<!------------------------------------- LAB 1.2 -------------------------------------->
<!------------------------------------- LAB 1.2 -------------------------------------->
        
            <section class="resume-section" id="lab1.2">
                <div class="resume-section-content">
                    <h2 class="mb-5">LAB 1.2</h2>
                    
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Introduction</h3>
                            <div class="subheading mb-3">Lab Objectives</div>
                            <p>The objective of this lab is to continue from lab 1 and test the Bluetooth connection between 
                                the board and our laptops. We practiced sending timestamped messages from the Artemis board, and 
                                how to use notification handlers in Jupyter Notebook to receive and handle these messages.</p>
                            <div class="subheading mb-3">Components</div>
                            <p>1 x SparkFun RedBoard Artemis Nano</p>
                            <p>1 x USB C-to-C or A-to-C cable</p>
                        </div>
                        <div class="flex-shrink-0"><span class="text-primary">Janurary 29th</span></div>
                    </div>

                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Set up</h3>
                            <div class="subheading mb-3">How to log back into virtual machine</div>
                            
                            <div style="margin-top: 20px;">
                                <p> Open the terminal and type these 3 commands one at a time. This navigates to the correct directory, 
                                    opens the virtual machine, and starts the Jupyter Notebook tab on my browser.
                                    <br><span class="text-primary">cd /Users/patty/Documents/fastrobots</span>
                                    <br><span class="text-primary">source FastRobots_ble/bin/activate</span>
                                    <br><span class="text-primary">Jupyter lab</span>
                                </p>
                            </div>

                            <div class="subheading mb-3">Configurations</div>
                            <div style="margin-top: 20px;">
                                <p> I made a copy of the ble_arduino.ino file, and the demo.ipynb file and did the rest of the lab tasks there.</p>
                                <p> I added added MAC address here in the connection.yaml file from the project directory.</p>
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2/adressloc.png" alt="..." /></span>
                            </div>

                            <div style="margin-top: 30px;">
                                <p> What is a UUID? It stands for Universally Unique Identifiers and they help differentiate the 
                                    different kinds of data that we are sending.
                                    Run these two lines in a code block in Jupyter Notebook to generate a new UUID.
                                    <br><span class="text-primary">from uuid import uuid4</span>
                                    <br><span class="text-primary">uuid4()</span>
                                </p>
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <p> With a newly generated UUID, copy and paste it into these two locations. In the connection.yaml file and in the
                                    ble_arduino.ino file. Make sure the UUIDs used in the Arduino sketch always match those used by Python in the configuration 
                                    file (connection.yaml).
                                    <!------- IMAGES side by side HERE --------->
                                <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 75px; width: auto;" src="images/lab2/uuid1.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 75px; width: auto;" src="images/lab2/uuid2.png" alt="Image 2" /></div>
                                </div>
                                </p>
                            </div>
                            
                        </div>
                    </div>


                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <h3 class="mb-0">Practice!</h3>
                            <div class="subheading mb-3">Tasks to practice receiving messages from the Artemis board</div>

                            <div style="margin-top: 20px;">
                                <p>I am connected to Bluetooth!</p>
                                <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2/blut.png" alt="..." /></span>
                            </div>
                            
                            <div style="margin-top: 70px;">
                                <p> 1. Send an ECHO command with a string value from the computer to the Artemis board, 
                                    and receive an augmented string on the computer.</p>
                                <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 90px; width: auto;" src="images/lab2/task1.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 250px; width: auto;" src="images/lab2/echo.png" alt="Image 2" /></div>
                                </div>
                                <p style="margin-top: 10px;" style="padding-right: 10px;" class="text-dark"> In my Python script, I am using the send_command() function which
                                    sends a string data to the GATT characteristic (TX_CMD_STRING). Then there is a case called "ECHO" in my Arduino script that received the message
                                    and manipulates the string. I have it print to the Arduino serial (for testing purposes) and then I have it send the edited string back with the writeValue() function. 
                                    since I have a receive_string() function, it reads the most recent string message and prints it out to the Python script. </p>
                            </div>

                            <div style="margin-top: 70px;">
                                <p> 2. Add a command GET_TIME_MILLIS which makes the robot reply write a string such as “T:123456” to the string characteristic.</p>
                                <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 90px; width: auto;" src="images/lab2/task2.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 150px; width: auto;" src="images/lab2/get time millis.png" alt="Image 2" /></div>
                                </div>
                                <p style="margin-top: 10px;" style="padding-right: 10px;" class="text-dark"> This command is similar to the case before, except I sent the Arduino an empty message since it just 
                                    wanted to trigger code in the GET_TIME_MILLIS case in Arduino. Once that case was called, it used the millis() function to generate a time in milliseconds. It is important to clear the string,
                                    then append the parts I need every time becuase I was sending multiple different messages between the two. Again, I have a receive_string() function in my python that reads the string and 
                                    prints it out.</p>
                            </div>

                            <div style="margin-top: 70px;">
                                <p> 3. Set up a notification handler in Python to receive the string value from the Artemis board. 
                                    In the callback function, extract the time from the string.</p>
                                <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2/task3.png" alt="..." /></span>
                                <p style="margin-top: 10px;" style="padding-right: 10px;" class="text-dark"> In my notification handler I look for the "t" character in the string. Then I have an if statement basically so it 
                                    only continues if it can find that t. Then it manipulates the string to only have the time as a float, then I store it in an array called time_msg. The start_notify funciton activated the notification hanlder.
                                    so it is constantly running and will automatically read the messages sent from the Arduino of the proper type. 
                            
                            <div style="margin-top: 70px;">
                                <p> 4. Write a loop that gets the current time in milliseconds and sends it to your laptop to be received and processed 
                                    by the notification handler. Collect these values for a few seconds and use the time stamps to determine how fast messages 
                                    can be sent. What is the effective data transfer rate of this method?</p>
                                    <!------- IMAGES side by side HERE --------->
                                <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 200px; width: auto;" src="images/lab2/task4.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 200px; width: auto;" src="images/lab2/timetest.png" alt="Image 2" /></div>
                                </div>
                                <p style="margin-top: 10px;" style="padding-right: 10px;" class="text-dark"> In python I sent the command TIME_TEST, wich corresponds to the case in the ardino code. this is a loop that runs a set number of times
                                    (in this case 1000) and it reads the current time in milliseconds and sends it as a string. now that my notification handler is running, it knows how to edit this string, every time this
                                    loop runs. I have a second block of code that is to find the data transfer rate. Once the loop is finished running, it uses the first and last time values to find the total rate of message transfer. 
                                    in this case, the time was 133.6005 messages sent per second.  </p>
                            </div>

                            <div style="margin-top: 70px;">
                                <p> 5. Now create an array that can store time stamps. This array should be defined globally so that other functions can access it if need be. 
                                    In the loop, rather than send each time stamp, place each time stamp into the array.
                                    Then add a command SEND_TIME_DATA which loops the array and sends each data point as a string to your laptop to be processed. (You can store these values in a list in python to determine if all 
                                    the data was sent over.)</p>
                                <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 220px; width: auto;" src="images/lab2/task5.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 300px; width: auto;" src="images/lab2/send time data.png" alt="Image 2" /></div>
                                </div>
                                <p style="margin-top: 10px;" style="padding-right: 10px;" class="text-dark"> For this problem I made two        separate cases to send commands to in the Arduino script. The first one FILL_TIME_ARRAY is to only 
                                    fill up an array with the times. The second case SEND_TIME_DATA, loops over the array and sends it all at once. I made another code block to test how many messages were sent per second and 
                                    with this method, 403.88 messages were sent per second. </p>
                            </div>

                            <div style="margin-top: 70px;">
                                <p> 6. Add a second array that is the same size as the time stamp array. Use this array to store temperature readings. Each element in both 
                                    arrays should correspond, e.e., the first time stamp was recorded at the same time as the first temperature reading. Then add a command GET_TEMP_READINGS 
                                    that loops through both arrays concurrently and sends each temperature reading with a time stamp. The notification handler should parse these strings and 
                                    and populate the data into two lists.</p>
                                <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 300px; width: auto;" src="images/lab2/task6.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 300px; width: auto;" src="images/lab2/sendtemp.png" alt="Image 2" /></div>
                                </div>
                                <p style="margin-top: 10px;" style="padding-right: 10px;" class="text-dark"> This one took a bit more problem solving so I made a separate notification handler for these types of messages. In the Python, I sent two separate commands to fill the arrays with data and 
                                    then to send it all at once because we proved earlier this was the faster way of sending data. FILL_TEMP_ARRAY filled both an array with temperatures and timestamps that coorespond to each. Then GET_TEMP_READINGS creates a string with an upper case T: for temperature and 
                                    a lower case t: for time from the timestamp array. Once all the data is appended to a string it is sent. this loops over the whole array of collected temperatures. In the notification handler, I look for the time and the temperature and extract them from the string.
                                    Last, I printed them all out in nice columns. </p>
                            </div>

                            <div style="margin-top: 70px;">
                                <p> 7. Discuss the differences between these two methods, the advantages and disadvantages of both and the potential scenarios 
                                    that you might choose one method over the other. How “quickly” can the second method record data? The Artemis board has 384 kB of RAM. Approximately how much data can you store to send without running out of memory?</p>
                                <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 180px; width: auto;" src="images/lab2/meth1.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 180px; width: auto;" src="images/lab2/meth2.png" alt="Image 2" /></div>
                                </div>
                                <p style="margin-top: 10px;" style="padding-right: 10px;" class="text-dark"> I calculated the time to send messages for both scenarios previosly in my script. The first method sent approximately 133 messages per second and 
                                    the second method was able to send approximately 404 messages per second. Then using our knowledge of the RAM capacity of the Artemis, I calculated that with method 1 I can send messages for over 5 minutes before I run out of storage
                                    and with the second method I can send messages for 1.8 minutes before I run out of storage. The advantages of the first method is that we can send real-time transmission of data, as time stamps are sent immediately after being generated.
                                    Disadvantages could be the slower rate of data transfer and higher potential for data loss or delays if the communication channel experiences congestion or interference. The second method, other than the speed, has the advantage of providing more flexibility in handling and processing data 
                                    on both the sender and receiver sides. A disadvantage could be having to wait till the array is filled to send the data, and having to make sure the array is not over-filled. 
                                    In the callback function, extract the time from the string. </p>
                            </div>

                            
                        </div>
                    </div>

                    
                </div>
            </section>
            
<!-------------------------------------- LAB 2 ---------------------------------------------->           
<!-------------------------------------- LAB 2 ---------------------------------------------->
<!-------------------------------------- LAB 2 ---------------------------------------------->
        
            <hr class="m-0" />
            <section class="resume-section" id="lab2">
                <div class="resume-section-content">
                    <h2 class="mb-5">Lab 2</h2>

                    
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <!---------------------------INTRO------------------------------->
                            <h3 class="mb-0">Introduction</h3>
                            <div class="subheading mb-3">Lab Objectives</div>
                            <p>The objective of this lab is to add the IMU to the robot and to learn how to use readings from the accelerometer
                            and gyroscope. I learned how to filter data to get the most accurate reading. We also got to test out our stunt cars!</p>
                            <div class="subheading mb-3">Components</div>
                            <p>1 x SparkFun RedBoard Artemis Nano</p>
                            <p>1 x USB C-to-C or A-to-C cable</p>
                            <p>1 x 9DOF IMU sensor</p>
                            <p>1 x Force1 RC car</p>
                            <p>1 x Li-Ion 3.7V 850mAh battery</p>
                        </div>
                        <div class="flex-shrink-0"><span class="text-primary">Februrary 7th</span></div>
                    </div>
                        
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <!---------------------------Set up the IMU ------------------------------->
                            <h3 class="mb-0">Set up the IMU</h3>
                            
                            <div style="margin-top: 20px;">
                                <p> 1. In the Arduino library manager, install the SparkFun 9DOF IMU Breakout - ICM 20948 - Arduino Library</p>
                                <p> 2. Connect the IMU to the artemis</p>
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/imu.jpg" alt="..." /></span>
                            </div>

                            <div style="margin-top: 20px;">
                                <p> 3. Run the file “..\Arduino\libraries\SparkFun_ICM-20948\SparkFun_ICM-20948_ArduinoLibrary-master\examples\Arduino\Example1_Basics”</p>
                                <p> 4. Look for the variable <span class="text-dark">AD0_VAL</span>, set it to zero. 
                                <br> (This variable represents the last bit of the i2c address of the IMU. It needs to be set to 0 or 1 depending on if the ADR jumper is closed)</p>
                            </div>

                            <div style="margin-top: 20px;">
                                <p> I added a blinking light during startup as a visual indication that the board is running. Then I tested the accelerometer data with the serial plotter, 
                                you can see as I flip the IMU in different ways how the lines fluctuate. The data is pretty noisy. </p>
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/vMpoU66qJ04?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>
                            
                            <!---------------------------ACCELEROMETER------------------------------->
                            <h3 style="margin-top: 60px;" class="mb-0">Accelerometer</h3>
                            <div class="subheading mb-3">Convert Accelerometer Data into Pitch and Roll</div>
                            <div style="margin-top: 20px;">
                                <p> These are the equations I used to convert the raw accelerometer data into Euler angles (pitch and roll).</p>
                                 <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 60px; width: auto;" src="images/lab2.0/pitcheqn.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 60px; width: auto;" src="images/lab2.0/rolleqn.png" alt="Image 2" /></div>
                                </div>
                            </div>

                            <div style="margin-top: 20px;">
                                <p> Here is a video of me holding the IMU steady with a pitch of -90 degrees and a roll of zero. I am printing the values in degrees to the serial monitor 
                                of the Arduino. As you can see the accelerometer is pretty accurate so there is no need for a two-point calibration. </p>
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/fDkZO7NKR94?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>

                            <div style="margin-top: 30px;" class="subheading mb-3">Analyzing The Frequency Spectrum</div>
                            <div style="margin-top: 5px;">
                                <p> Because there is noise, it is good to analyze the data in the frequency spectrum, to see what frequencies of noise are prevalent
                                    .I recorded accelerometer data on the Artemis and sent it over to my computer. I downloaded Scipy.fftpack package to graph the FFT. 
                                    Below is how I calculated the Fourier transform. 
                                </p>
                                <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/fourier calc.png" alt="..." /></span>
                            </div>

                            <div style="margin-top: 20px;">
                                <p> Below are my Fourier spectrum graphs for both pitch and roll when the IMU is flat on the table. The left is the raw data measurement and the right is the FFT. </p>
                                <span class="d-none d-lg-block"><img style="width: 700px; height: auto;" src="images/lab2.0/still fourier.png" alt="..." /></span>
                                <p> I then tried adding a vibration by hitting the table. You can see in the amplitude graph where I hit the table, but the FFT graph still looks similar with larger magnitudes.</p>
                                <span class="d-none d-lg-block"><img style="width: 700px; height: auto;" src="images/lab2.0/hitfourier.png" alt="..." /></span>
                                <p> None of the frequencies stood out to me in the vibration test but the parts of the spectrum with the highest spikes occur at around 10 Hz and 35 Hz, I could not determine an 
                                obvious cutoff frequency but I kept playing around with it and decided to start with a cutoff frequency of 10 Hz.</p>
                            </div>

                            <div class="subheading mb-3">Applying Low Pass Filter</div>
                            
                            <div style="margin-top: 20px;">
                                <p> For the low-pass filter, to calculate my alpha value I used these formulas starting with the cutoff frequency (fc), and period (T) which is 1/sampling rate.</p>
                                <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 60px; width: auto;" src="images/lab2.0/fceqn.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 60px; width: auto;" src="images/lab2.0/alphaeqn.png" alt="Image 2" /></div>
                                </div>
                                
                                <p style="margin-top: 20px;"> After yielding an alpha value of ~ 0.12, I used this formula for both pitch and roll to filter my raw accelerometer data. </p>
                                <span class="d-none d-lg-block"><img style="width: 500px; height: auto;" src="images/lab2.0/lpfeqn.png" alt="..." /></span>

                                <p style="margin-top: 20px;"> Here is what my LPF looks like in the Arduino code.
                                <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/lpf code.png" alt="..." /></span></p>

                                <p style="margin-top: 10px;"> This is a graph of the raw data and filtered data taken at the same time. This one is with the 10 Hz cutoff frequency. As you can see it is better but there is still 
                                a significant amount of noise. 
                                <span class="d-none d-lg-block"><img style="width: 700px; height: auto;" src="images/lab2.0/f=10.png" alt="..." /></span></p>
                                
                                <p> I tried filtering again but with a lower cutoff frequency of 4 Hz and I hit the table at the begining. This was significantly better at minimizing the noise. 
                                <span class="d-none d-lg-block"><img style="width: 700px; height: auto;" src="images/lab2.0/f=4.png" alt="..." /></span></p>
                                
                                <p> I think my low pass filter overall worked great. The values it outputs for the angles are consistent. There is still a good amount of noise but 
                                    I cannot keep lowering the frequency cutoff value or else I will miss out on important signals from the sensors.</p>
                            </div>
                            <!---------------------------GYROSCOPE------------------------------->
                            <h3 class="mb-0">Gyroscope</h3>
                            <div class="subheading mb-3">Compute Pitch, Roll, and Yaw Angles</div>
                            <div style="margin-top: 20px;">
                                <p> To convert the raw gyroscope data to Roll, Pitch, and Yaw angles, I multiplied the angle by a time increment dt and added it to the current angle.
                                    Here is the code in my arduino. 
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/gyrocode.png" alt="..." /></span>
                                </p>

                                <p> This is a graph of gyroscope roll, pitch, and yaw vs time. I rotated the IMU back and forth as you can see from the occilations. The issue with the gyroscope is that it constantly "drifts". 
                                    As you can see the angels apear to be driting and increasing slowly even if i was retunring teh gyrosope to the same place each time. 
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/drifting gyro.png" alt="..." /></span>
                                </p>
                                <p> The main differnce between the gyroscope data and the accelerometer data is that the gyrosope drifts from the start. Becuase the gyrposcope only measures relative angles, I need to always 
                                    initiallize the first position as zero. And lastly, the gyroscope has much less noise than the accleerometer data which is a big benifit. I tried playing around with the sampling rate 
                                    by adding in delays, I found that the longer the delay (lower sampling rate), the more the gyroscope values drift. Below is the data with keeping it still (my leg was tapping under the desk).
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/driftmore.png" alt="..." /></span>
                                </p>
                            </div>
                            <!---------------------------Complementary Filter------------------------------->
                            <h3 class="mb-0">Complementary Filter</h3>
                            <div class="subheading mb-3">Combining Gyroscope data and Accelerometer Data</div>
                            <div style="margin-top: 20px;">
                                <p> A complimentray filter can be uaed to combine the two types of data, gyroscope and accelerometer. It uses the most useufl parts from both and creates the most 
                                    accurate filter that is not susceptible to drift or quick vibrations. I tried various alpha values in order to determine wich filter to putthe most weight on.  
                                    The following is the equation for the complimentary filter. 
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/compfilter.png" alt="..." /></span>
                                </p>
                                <p> To implement it on the artemis, I took the accelerometer low pass filter and gyroscope readings all together and passed it though my complimentary filter. 
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/compcode.png" alt="..." /></span>
                                </p>
                                <p> I decided to go with an alpha of 0.1. After many tries it seemed to be the best combination of the two. As you can see in the image below. The complimentary filter did a good job
                                    of combineing the two filters. In these images I am just rolling it from -90 to zero to 90 and back to zero. In the roll graph, all the filters are fairly accurate so you dont see the 
                                    benefits of the complimentary filter as much, but in the pitch graph (I was trying to keep it constant) you can see how the complimentary filter kept the noise low and did not drift. 
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="margin-right: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/comproll.png" alt="Image 1" /></div>
                                        <div style="margin-left: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/comppitch.png" alt="Image 2" /></div>
                                    </div>
                                </p>
                                <p> In this measurement of data I added vibrations and the filter did a good job. You can see especially see in the pitch graph where the complimentary filter
                                    is not susceptible to the gyroscope drifting and is much less noisy then just the LPF filter.
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="margin-right: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/viberoll.png" alt="Image 1" /></div>
                                        <div style="margin-left: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/vibepitch.png" alt="Image 2" /></div>
                                    </div>
                                </p>

                            </div>
                            <!---------------------------Sample Data------------------------------->
                            <h3 class="mb-0">Sample Data</h3>
                            <div class="subheading mb-3">Improving the way I Sample Data</div>
                            <div style="margin-top: 20px;">
                                <p> After making sure all my filters were running smoothly, I implemented a few strategies to speed up the excecution of the main loop and the sampling rate. 
                                    I deleted all my comments, and removed all my delays. I also moved the part where I checked if the data is ready in the main loop (see below). I was able to record a sampling rate
                                    of about 315 messages per secodn this way this is almost double what I had before.
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="margin-right: 8px;"><img style="height: 250px; width: auto;" src="images/lab2.0/void.png" alt="Image 1" /></div>
                                        <div style="margin-left: 8px;"><img style="height: 150px; width: auto;" src="images/lab2.0/sampling rate.png" alt="Image 2" /></div>
                                    </div>
                                </p>
                            </div>
                            <!---------------------------STUNT------------------------------->
                            <h3 style="margin-top: 50px;" class="mb-0">Stunt Car!</h3>
                            <div class="subheading mb-3">Using Built-in Controller</div>
                            <div style="margin-top: 20px;">
                                <p> Here I am performing several stunds using the car's original controller. 
                                     <iframe width="560" height="315" src="https://www.youtube.com/embed/tUKXVbgNJHY?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                                </p>
                            </div>
                        
                        
                        
                        
                        </div>
                    </div>
                </div>
            </section>
        
            <hr class="m-0" />
<!----------------------------------- Lab 3 ------------------------------------->
<!----------------------------------- Lab 3 ------------------------------------->
<!----------------------------------- Lab 3 ------------------------------------->
        
            <section class="resume-section" id="lab3">
                <div class="resume-section-content">
                    <h2 class="mb-5">Lab 3</h2>

                    
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <!---------------------------INTRO------------------------------->
                            <h3 class="mb-0">Introduction</h3>
                            <div class="subheading mb-3">Lab Objectives</div>
                            <p>The objectice of this lab is to start soldering components, we soldered the lithium-ion battery to the appropriate connector so we can use the
                                artemis board without needing to be pluggin in to our laptops. We also soldered the time of flight sensors to QWIIC Breakout board conenctor. 
                                With the ToF sesors, I and learned how to read and send data with two identicle sensors. I also implemented ways to read sensor data as quick as possible. </p>
                            <div class="subheading mb-3">Components</div>
                            <p>1 x SparkFun RedBoard Artemis Nano</p>
                            <p>1 x USB cable</p>
                            <p>2 x 4m ToF sensor</p>
                            <p>1 x QWIIC Breakout board</p>
                            <p>2 x Qwiic connector</p>
                            <p>1 x Measuring tape</p>
                        </div>
                        <div class="flex-shrink-0"><span class="text-primary">Februrary 14th</span></div>
                    </div>
                        
                    <div class="d-flex flex-column flex-md-row justify-content-between mb-5">
                        <div class="flex-grow-1">
                            <!--------------------------- 1. Power up your Artemis with a battery! ------------------------------->
                            <h3 class="mb-0">Power up!</h3>
                            <div class="subheading mb-3">Power the Artemis with a battery.</div>
                            <div style="margin-top: 20px;">
                                <p> 1. In the Arduino library manager, install the SparkFun 9DOF IMU Breakout - ICM 20948 - Arduino Library</p>
                                <p> 2. Connect the IMU to the artemis</p>
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/imu.jpg" alt="..." /></span>
                            </div>

                            <div style="margin-top: 20px;">
                                <p> 3. Run the file “..\Arduino\libraries\SparkFun_ICM-20948\SparkFun_ICM-20948_ArduinoLibrary-master\examples\Arduino\Example1_Basics”</p>
                                <p> 4. Look for the variable <span class="text-dark">AD0_VAL</span>, set it to zero. 
                                <br> (This variable represents the last bit of the i2c address of the IMU. It needs to be set to 0 or 1 depending on if the ADR jumper is closed)</p>
                            </div>

                            <div style="margin-top: 20px;">
                                <p> I added a blinking light during startup as a visual indication that the board is running. Then I tested the accelerometer data with the serial plotter, 
                                you can see as I flip the IMU in different ways how the lines fluctuate. The data is pretty noisy. </p>
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/vMpoU66qJ04?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>
                            
                            <!---------------------------4. Connect the first ToF sensor to the QWIIC breakout board ------------------------------->
                            <h3 style="margin-top: 60px;" class="mb-0">Set up ToF sensors</h3>
                            <div class="subheading mb-3">Connect the first ToF sensor to the QWIIC breakout board.</div>
                            <div style="margin-top: 20px;">
                                <p> These are the equations I used to convert the raw accelerometer data into Euler angles (pitch and roll).</p>
                                 <div style="display: flex; align-items: flex-start;">
                                    <div style="margin-right: 8px;"><img style="height: 60px; width: auto;" src="images/lab2.0/pitcheqn.png" alt="Image 1" /></div>
                                    <div style="margin-left: 8px;"><img style="height: 60px; width: auto;" src="images/lab2.0/rolleqn.png" alt="Image 2" /></div>
                                </div>
                            </div>

                            <div style="margin-top: 20px;">
                                <p> Here is a video of me holding the IMU steady with a pitch of -90 degrees and a roll of zero. I am printing the values in degrees to the serial monitor 
                                of the Arduino. As you can see the accelerometer is pretty accurate so there is no need for a two-point calibration. </p>
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/fDkZO7NKR94?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>
                            <!--------------------------->
                            <div style="margin-top: 30px;" class="subheading mb-3">Scan the I2C channel to find the sensor.</div>

                            <div style="margin-top: 5px;">
                                <p> Because there is noise, it is good to analyze the data in the frequency spectrum, to see what frequencies of noise are prevalent
                                    .I recorded accelerometer data on the Artemis and sent it over to my computer. I downloaded Scipy.fftpack package to graph the FFT. 
                                    Below is how I calculated the Fourier transform. 
                                </p>
                                <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/fourier calc.png" alt="..." /></span>
                            </div>

                            <div style="margin-top: 20px;">
                                <p> Below are my Fourier spectrum graphs for both pitch and roll when the IMU is flat on the table. The left is the raw data measurement and the right is the FFT. </p>
                                <span class="d-none d-lg-block"><img style="width: 700px; height: auto;" src="images/lab2.0/still fourier.png" alt="..." /></span>
                                <p> I then tried adding a vibration by hitting the table. You can see in the amplitude graph where I hit the table, but the FFT graph still looks similar with larger magnitudes.</p>
                                <span class="d-none d-lg-block"><img style="width: 700px; height: auto;" src="images/lab2.0/hitfourier.png" alt="..." /></span>
                                <p> None of the frequencies stood out to me in the vibration test but the parts of the spectrum with the highest spikes occur at around 10 Hz and 35 Hz, I could not determine an 
                                obvious cutoff frequency but I kept playing around with it and decided to start with a cutoff frequency of 10 Hz.</p>
                            </div>
                            <!--------------------------->
                            <div style="margin-top: 30px;" class="subheading mb-3">Test the first sensor.</div>

                            <div style="margin-top: 5px;">
                                <p> Because there is noise, it is good to analyze the data in the frequency spectrum, to see what frequencies of noise are prevalent
                                    .I recorded accelerometer data on the Artemis and sent it over to my computer. I downloaded Scipy.fftpack package to graph the FFT. 
                                    Below is how I calculated the Fourier transform. 
                                </p>
                                <iframe width="560" height="315" src="https://www.youtube.com/embed/fDkZO7NKR94?rel=0&modestbranding=1&showinfo=0" frameborder="0" allowfullscreen></iframe>
                            </div>

                            <!--------------------------------- Testing different sensor modes -------------------------------->
                            <h3 class="mb-0">Testing different sensor modes</h3>
                            <div class="subheading mb-3">Pros & Cons of each mode</div>
                            <div style="margin-top: 20px;">
                                <p> To convert the raw gyroscope data to Roll, Pitch, and Yaw angles, I multiplied the angle by a time increment dt and added it to the current angle.
                                    Here is the code in my arduino. 
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/gyrocode.png" alt="..." /></span>
                                </p>
                                <p> In this measurement of data I added vibrations and the filter did a good job. You can see especially see in the pitch graph where the complimentary filter
                                    is not susceptible to the gyroscope drifting and is much less noisy then just the LPF filter.
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="margin-right: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/viberoll.png" alt="Image 1" /></div>
                                        <div style="margin-left: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/vibepitch.png" alt="Image 2" /></div>
                                    </div>
                                </p>
                                <p> To convert the raw gyroscope data to Roll, Pitch, and Yaw angles, I multiplied the angle by a time increment dt and added it to the current angle.
                                    Here is the code in my arduino. 
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/gyrocode.png" alt="..." /></span>
                                </p>

                            </div>
                            <!--------------------------- Hookup both TOF sensors ------------------------------->
                            <h3 class="mb-0">Setting up Both ToF Sensors</h3>
                            <div class="subheading mb-3">First method to record data with both sensors simultaniously.</div>
                            <div style="margin-top: 20px;">
                                <p> A complimentray filter can be uaed to combine the two types of data, gyroscope and accelerometer. It uses the most useufl parts from both and creates the most 
                                    accurate filter that is not susceptible to drift or quick vibrations. I tried various alpha values in order to determine wich filter to putthe most weight on.  
                                    The following is the equation for the complimentary filter. 
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/compfilter.png" alt="..." /></span>
                                </p>
                                <p> I decided to go with an alpha of 0.1. After many tries it seemed to be the best combination of the two. As you can see in the image below. The complimentary filter did a good job
                                    of combineing the two filters. In these images I am just rolling it from -90 to zero to 90 and back to zero. In the roll graph, all the filters are fairly accurate so you dont see the 
                                    benefits of the complimentary filter as much, but in the pitch graph (I was trying to keep it constant) you can see how the complimentary filter kept the noise low and did not drift. 
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="margin-right: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/comproll.png" alt="Image 1" /></div>
                                        <div style="margin-left: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/comppitch.png" alt="Image 2" /></div>
                                    </div>
                                </p>
                            </div>
                            <!--------------------------->
                            <div class="subheading mb-3">Quicker method to record data.</div>
                            <div style="margin-top: 20px;">
                                <p> A complimentray filter can be uaed to combine the two types of data, gyroscope and accelerometer. It uses the most useufl parts from both and creates the most 
                                    accurate filter that is not susceptible to drift or quick vibrations. I tried various alpha values in order to determine wich filter to putthe most weight on.  
                                    The following is the equation for the complimentary filter. 
                                    <span class="d-none d-lg-block"><img style="width: 600px; height: auto;" src="images/lab2.0/compfilter.png" alt="..." /></span>
                                </p>
                                <p> I decided to go with an alpha of 0.1. After many tries it seemed to be the best combination of the two. As you can see in the image below. The complimentary filter did a good job
                                    of combineing the two filters. In these images I am just rolling it from -90 to zero to 90 and back to zero. In the roll graph, all the filters are fairly accurate so you dont see the 
                                    benefits of the complimentary filter as much, but in the pitch graph (I was trying to keep it constant) you can see how the complimentary filter kept the noise low and did not drift. 
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="margin-right: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/comproll.png" alt="Image 1" /></div>
                                        <div style="margin-left: 8px;"><img style="height: 350px; width: auto;" src="images/lab2.0/comppitch.png" alt="Image 2" /></div>
                                    </div>
                                </p>
                            </div>
                            <!------------------- Graphs -------------------->
                            <div style="margin-top: 20px;">
                                <p> After making sure all my filters were running smoothly, I implemented a few strategies to speed up the excecution of the main loop and the sampling rate. 
                                    I deleted all my comments, and removed all my delays. I also moved the part where I checked if the data is ready in the main loop (see below). I was able to record a sampling rate
                                    of about 315 messages per secodn this way this is almost double what I had before.
                                    <div style="display: flex; align-items: flex-start;">
                                        <div style="margin-right: 8px;"><img style="height: 250px; width: auto;" src="images/lab2.0/void.png" alt="Image 1" /></div>
                                        <div style="margin-left: 8px;"><img style="height: 150px; width: auto;" src="images/lab2.0/sampling rate.png" alt="Image 2" /></div>
                                    </div>
                                </p>
                            </div>
                            
                        
                        
                        
                        
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
